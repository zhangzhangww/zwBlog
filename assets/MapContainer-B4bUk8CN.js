import{x as P,L as x,_ as C,r as I,o as k,a as S,e as j,f as c,t as v,z as w,c as E}from"./index-COSkOSiD.js";var L={exports:{}};(function(y,g){(function(l,r){y.exports=r()})(P,function(){function l(e){var s=[];return e.AMapUI&&s.push(r(e.AMapUI)),e.Loca&&s.push(A(e.Loca)),Promise.all(s)}function r(e){return new Promise(function(s,i){var u=[];if(e.plugins)for(var a=0;a<e.plugins.length;a+=1)o.AMapUI.plugins.indexOf(e.plugins[a])==-1&&u.push(e.plugins[a]);if(t.AMapUI===n.failed)i("前次请求 AMapUI 失败");else if(t.AMapUI===n.notload){t.AMapUI=n.loading,o.AMapUI.version=e.version||o.AMapUI.version,a=o.AMapUI.version;var f=document.body||document.head,d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/ui/"+a+"/main.js",d.onerror=function(p){t.AMapUI=n.failed,i("请求 AMapUI 失败")},d.onload=function(){if(t.AMapUI=n.loaded,u.length)window.AMapUI.loadUI(u,function(){for(var p=0,m=u.length;p<m;p++){var U=u[p].split("/").slice(-1)[0];window.AMapUI[U]=arguments[p]}for(s();M.AMapUI.length;)M.AMapUI.splice(0,1)[0]()});else for(s();M.AMapUI.length;)M.AMapUI.splice(0,1)[0]()},f.appendChild(d)}else t.AMapUI===n.loaded?e.version&&e.version!==o.AMapUI.version?i("不允许多个版本 AMapUI 混用"):u.length?window.AMapUI.loadUI(u,function(){for(var p=0,m=u.length;p<m;p++){var U=u[p].split("/").slice(-1)[0];window.AMapUI[U]=arguments[p]}s()}):s():e.version&&e.version!==o.AMapUI.version?i("不允许多个版本 AMapUI 混用"):M.AMapUI.push(function(p){p?i(p):u.length?window.AMapUI.loadUI(u,function(){for(var m=0,U=u.length;m<U;m++){var _=u[m].split("/").slice(-1)[0];window.AMapUI[_]=arguments[m]}s()}):s()})})}function A(e){return new Promise(function(s,i){if(t.Loca===n.failed)i("前次请求 Loca 失败");else if(t.Loca===n.notload){t.Loca=n.loading,o.Loca.version=e.version||o.Loca.version;var u=o.Loca.version,a=o.AMap.version.startsWith("2"),f=u.startsWith("2");if(a&&!f||!a&&f)i("JSAPI 与 Loca 版本不对应！！");else{a=o.key,f=document.body||document.head;var d=document.createElement("script");d.type="text/javascript",d.src="https://webapi.amap.com/loca?v="+u+"&key="+a,d.onerror=function(p){t.Loca=n.failed,i("请求 AMapUI 失败")},d.onload=function(){for(t.Loca=n.loaded,s();M.Loca.length;)M.Loca.splice(0,1)[0]()},f.appendChild(d)}}else t.Loca===n.loaded?e.version&&e.version!==o.Loca.version?i("不允许多个版本 Loca 混用"):s():e.version&&e.version!==o.Loca.version?i("不允许多个版本 Loca 混用"):M.Loca.push(function(p){p?i(p):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var n;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(n||(n={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},M={AMap:[],AMapUI:[],Loca:[]},b=[],h=function(e){typeof e=="function"&&(t.AMap===n.loaded?e(window.AMap):b.push(e))};return{load:function(e){return new Promise(function(s,i){if(t.AMap==n.failed)i("");else if(t.AMap==n.notload){var u=e.key,a=e.version,f=e.plugins;u?(window.AMap&&location.host!=="lbs.amap.com"&&i("禁止多种API加载方式混用"),o.key=u,o.AMap.version=a||o.AMap.version,o.AMap.plugins=f||o.AMap.plugins,t.AMap=n.loading,a=document.body||document.head,window.___onAPILoaded=function(p){if(delete window.___onAPILoaded,p)t.AMap=n.failed,i(p);else for(t.AMap=n.loaded,l(e).then(function(){s(window.AMap)}).catch(i);b.length;)b.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+u+"&plugin="+o.AMap.plugins.join(","),f.onerror=function(p){t.AMap=n.failed,i(p)},a.appendChild(f)):i("请填写key")}else if(t.AMap==n.loaded)if(e.key&&e.key!==o.key)i("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(u=[],e.plugins)for(a=0;a<e.plugins.length;a+=1)o.AMap.plugins.indexOf(e.plugins[a])==-1&&u.push(e.plugins[a]);u.length?window.AMap.plugin(u,function(){l(e).then(function(){s(window.AMap)}).catch(i)}):l(e).then(function(){s(window.AMap)}).catch(i)}else if(e.key&&e.key!==o.key)i("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)i("不允许多个版本 JSAPI 混用");else{var d=[];if(e.plugins)for(a=0;a<e.plugins.length;a+=1)o.AMap.plugins.indexOf(e.plugins[a])==-1&&d.push(e.plugins[a]);h(function(){d.length?window.AMap.plugin(d,function(){l(e).then(function(){s(window.AMap)}).catch(i)}):l(e).then(function(){s(window.AMap)}).catch(i)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},t={AMap:n.notload,AMapUI:n.notload,Loca:n.notload},M={AMap:[],AMapUI:[],Loca:[]}}}})})(L);var D=L.exports;const J=x(D),O={class:"mapbox"},W={id:"myPageTop"},B={class:"info"},G={class:"shark"},T={__name:"MapContainer",setup(y){let g=null;I(null),I([]),I(null),I(null),I(null),I(null);const l=I({province:"",city:"",weather:"",temperature:"",windDirection:"",windPower:"",humidity:"",reportTime:""});return k(()=>{window._AMapSecurityConfig={securityJsCode:"d1274601b70408880591022cf50737e9"},J.load({key:"68b88fbfa919c7dded550e13ac4a1bee",version:"2.0",plugins:["AMap.Scale","AMap.AutoComplete","AMap.PlaceSearch","AMap.Geolocation","AMap.Weather","AMap.DistrictSearch"]}).then(r=>{g=new r.Map("container",{viewMode:"3D",zoom:11}),g.addControl(new r.Scale),g.addControl(new r.Geolocation);var A=new r.Weather;const n=h=>{A.getLive(h,function(e,s){l.value=s})};n("金水区");var o={input:"tipinput"},t=new r.Autocomplete(o),M=new r.PlaceSearch({map:g});t.on("select",b);function b(h){M.setCity(h.poi.adcode),M.search(h.poi.name),n(h.poi.name)}}).catch(r=>{console.log(r)})}),S(()=>{g==null||g.destroy()}),(r,A)=>(E(),j("div",O,[A[3]||(A[3]=c("div",{id:"container"},null,-1)),c("div",W,[A[1]||(A[1]=c("div",null,"请输入关键字：",-1)),A[2]||(A[2]=c("input",{type:"text",id:"tipinput"},null,-1)),c("button",{onClick:A[0]||(A[0]=n=>r.seacher(r.autoOptions.input))},"搜索")]),c("div",B,[c("div",G,[c("h4",null,"实时天气("+v(w(l).province)+"--"+v(w(l).city)+")",1),c("p",null,"城市/区："+v(w(l).city),1),c("p",null,"天气："+v(w(l).weather),1),c("p",null,"温度："+v(w(l).temperature),1),c("p",null,"风向："+v(w(l).windDirection),1),c("p",null,"风力："+v(w(l).windPower)+"级",1),c("p",null,"空气湿度："+v(w(l).humidity),1),c("p",null,"发布时间："+v(w(l).reportTime),1)])])]))}},q=C(T,[["__scopeId","data-v-9e17c931"]]);export{q as default};
