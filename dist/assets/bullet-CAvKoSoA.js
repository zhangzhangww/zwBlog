import{f as L,h as o,l as z,C as X,D as N,r as i,E as A,u as V,o as W,G as D,e as T,H as Y,I as Z,n as P,w as j,m as G,x as U,q as _,s as $,y as ee,i as te,F as ne,_ as ae}from"./index-DDyrEi58.js";const se="/zwBlog/assets/bag-Bc5DcoTJ.png",le="data:image/png;base64,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";var M=N({name:"vue3-danmaku",components:{},props:{danmus:{type:Array,required:!0,default:()=>[]},channels:{type:Number,default:0},autoplay:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},useSlot:{type:Boolean,default:!1},debounce:{type:Number,default:100},speeds:{type:Number,default:200},randomChannel:{type:Boolean,default:!1},fontSize:{type:Number,default:18},top:{type:Number,default:4},right:{type:Number,default:0},isSuspend:{type:Boolean,default:!1},extraStyle:{type:String,default:""}},emits:["list-end","play-end","dm-over","dm-out","update:danmus"],setup(l,{emit:v,slots:C}){let p=i(document.createElement("div")),n=i(document.createElement("div"));const m=i(0),Q=i(0);let f=0;const k=i(0),I=i(0),d=i(0),E=i(!1),g=i(!1),y=i({}),r=function(s,u,e="modelValue",t){return A({get:()=>s[e],set:w=>{u(`update:${e}`,w)}})}(l,v,"danmus"),c=V({channels:A(()=>l.channels||k.value),autoplay:A(()=>l.autoplay),loop:A(()=>l.loop),useSlot:A(()=>l.useSlot),debounce:A(()=>l.debounce),randomChannel:A(()=>l.randomChannel)}),a=V({height:A(()=>I.value),fontSize:A(()=>l.fontSize),speeds:A(()=>l.speeds),top:A(()=>l.top),right:A(()=>l.right)});function B(){q(),l.isSuspend&&function(){let s=[];n.value.addEventListener("mouseover",u=>{let e=u.target;e.className.includes("dm")||(e=e.closest(".dm")||e),e.className.includes("dm")&&(s.includes(e)||(v("dm-over",{el:e}),e.classList.add("pause"),s.push(e)))}),n.value.addEventListener("mouseout",u=>{let e=u.target;e.className.includes("dm")||(e=e.closest(".dm")||e),e.className.includes("dm")&&(v("dm-out",{el:e}),e.classList.remove("pause"),s.forEach(t=>{t.classList.remove("pause")}),s=[])})}(),c.autoplay&&O()}function q(){if(m.value=p.value.offsetWidth,Q.value=p.value.offsetHeight,m.value===0||Q.value===0)throw new Error("获取不到容器宽高")}function O(){g.value=!1,f||(f=window.setInterval(()=>function(){if(!g.value&&r.value.length)if(d.value>r.value.length-1){const s=n.value.children.length;c.loop&&(s<d.value&&(v("list-end"),d.value=0),K())}else K()}(),c.debounce))}function K(s){const u=c.loop?d.value%r.value.length:d.value,e=s||r.value[u];let t=document.createElement("div");c.useSlot?t=function(w,h){return Y({render:()=>Z("div",{},[C.dm&&C.dm({danmu:w,index:h})])}).mount(document.createElement("div"))}(e,u).$el:(t.innerHTML=e,t.setAttribute("style",l.extraStyle),t.style.fontSize=`${a.fontSize}px`,t.style.lineHeight=`${a.fontSize}px`),t.classList.add("dm"),n.value.appendChild(t),t.style.opacity="0",P(()=>{a.height||(I.value=t.offsetHeight),c.channels||(k.value=Math.floor(Q.value/(a.height+a.top)));let w=function(h){let x=[...Array(c.channels).keys()];c.randomChannel&&(x=x.sort(()=>.5-Math.random()));for(let b of x){const F=y.value[b];if(!F||!F.length)return y.value[b]=[h],h.addEventListener("animationend",()=>y.value[b].splice(0,1)),b%c.channels;for(let S=0;S<F.length;S++){const H=J(F[S])-10;if(H<=.88*(h.offsetWidth-F[S].offsetWidth)||H<=0)break;if(S===F.length-1)return y.value[b].push(h),h.addEventListener("animationend",()=>y.value[b].splice(0,1)),b%c.channels}}return-1}(t);if(w>=0){const h=t.offsetWidth,x=a.height;t.classList.add("move"),t.dataset.index=`${u}`,t.dataset.channel=w.toString(),t.style.opacity="1",t.style.top=w*(x+a.top)+"px",t.style.width=h+a.right+"px",t.style.setProperty("--dm-scroll-width",`-${m.value+h}px`),t.style.left=`${m.value}px`,t.style.animationDuration=m.value/a.speeds+"s",t.addEventListener("animationend",()=>{Number(t.dataset.index)!==r.value.length-1||c.loop||v("play-end",t.dataset.index),n.value&&n.value.removeChild(t)}),d.value++}else n.value.removeChild(t)})}function J(s){const u=s.offsetWidth||parseInt(s.style.width),e=s.getBoundingClientRect().right||n.value.getBoundingClientRect().right+u;return n.value.getBoundingClientRect().right-e}function R(){clearInterval(f),f=0,d.value=0}return W(()=>{B()}),D(()=>{R()}),{container:p,dmContainer:n,hidden:E,paused:g,danmuList:r,getPlayState:function(){return!g.value},resize:function(){q();const s=n.value.getElementsByClassName("dm");for(let u=0;u<s.length;u++){const e=s[u];e.style.setProperty("--dm-scroll-width",`-${m.value+e.offsetWidth}px`),e.style.left=`${m.value}px`,e.style.animationDuration=m.value/a.speeds+"s"}},play:O,pause:function(){g.value=!0},stop:function(){y.value={},n.value.innerHTML="",g.value=!0,E.value=!1,R()},show:function(){E.value=!1},hide:function(){E.value=!0},reset:function(){I.value=0,B()},add:function(s){if(d.value===r.value.length)return r.value.push(s),r.value.length-1;{const u=d.value%r.value.length;return r.value.splice(u,0,s),u+1}},push:function(s){return r.value.push(s),r.value.length-1},insert:K}}});const oe={ref:"container",class:"vue-danmaku"};(function(l,v){v===void 0&&(v={});var C=v.insertAt;if(typeof document<"u"){var p=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",C==="top"&&p.firstChild?p.insertBefore(n,p.firstChild):p.appendChild(n),n.styleSheet?n.styleSheet.cssText=l:n.appendChild(document.createTextNode(l))}})(`.vue-danmaku {
  position: relative;
  overflow: hidden;
}
.vue-danmaku .danmus {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  -webkit-transition: all 0.3s;
  transition: all 0.3s;
}
.vue-danmaku .danmus.show {
  opacity: 1;
}
.vue-danmaku .danmus.paused .dm.move {
  animation-play-state: paused;
}
.vue-danmaku .danmus .dm {
  position: absolute;
  font-size: 20px;
  color: #ddd;
  white-space: pre;
  transform: translateX(0);
  transform-style: preserve-3d;
}
.vue-danmaku .danmus .dm.move {
  will-change: transform;
  animation-name: moveLeft;
  animation-timing-function: linear;
  animation-play-state: running;
}
.vue-danmaku .danmus .dm.pause {
  animation-play-state: paused;
  z-index: 100;
}
@keyframes moveLeft {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(var(--dm-scroll-width));
  }
}
@-webkit-keyframes moveLeft {
  from {
    -webkit-transform: translateX(0);
  }
  to {
    -webkit-transform: translateX(var(--dm-scroll-width));
  }
}`),M.render=function(l,v,C,p,n,m){return T(),L("div",oe,[o("div",{ref:"dmContainer",class:z(["danmus",{show:!l.hidden},{paused:l.paused}])},null,2),X(l.$slots,"default")],512)},M.__file="src/lib/Danmaku.vue";const ue={class:"message-form","data-v-21971730":""},ie={class:"message-form__content","data-v-21971730":""},de={class:"baberrage",style:{}},re={class:"danmaku-name"},me={class:"bullet-item"},ce=["innerHTML"],ve={key:0,class:"success-box"},pe=N({__name:"bullet",setup(l){const v=i(["rgb(204,255,255)","white","rgb(204,255,204)","white","rgb(0,255,255)","white","rgb(255,204,255)","pink"]);function C(){return v.value[Math.floor(Math.random()*8)]}const p=V(["测试下弹幕效果","哈哈哈哈","真不错","小王最漂亮","神奇的地方","啦啦啦啦"]);let n=i(!1),m=i({commentPeople:"实验室",commentContent:""});function Q(){m.value.commentContent="",n.value=!0,setTimeout(()=>{n.value=!1},2e3)}const f=i(200),k=i(!0),I=i(!0),d=i(null),E=()=>{k.value=!k.value,k.value?d.value.play():d.value.pause()},g=()=>{I.value=!I.value,I.value?d.value.show():d.value.hide()},y=()=>{console.log(f.value),f.value+=20},r=()=>{console.log(f.value),f.value-=20};return i(200),(c,a)=>(T(),L(ne,null,[o("div",ue,[a[3]||(a[3]=o("div",{class:"message-form__title","data-v-21971730":""},"留言墙",-1)),o("div",ie,[j(o("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=B=>U(m).commentContent=B),id:"bubble_txt",max:"25",autocomplete:"off",placeholder:"留下点什么吧，最多25个字～","data-v-21971730":""},null,512),[[G,U(m).commentContent]]),o("button",{type:"button",id:"bubble_btn",onClick:Q,"data-v-21971730":""},"发射"),a[2]||(a[2]=o("br",null,null,-1))]),o("div",{class:"control"},[o("button",{type:"button",id:"bubble_btn",onClick:E,"data-v-21971730":""},"暂停/播放"),o("button",{type:"button",id:"bubble_btn",onClick:y,"data-v-21971730":""},"加速"),o("button",{type:"button",id:"bubble_btn",onClick:r,"data-v-21971730":""},"减速"),o("button",{type:"button",id:"bubble_btn",onClick:g,"data-v-21971730":""},"显示/隐藏")])]),o("div",de,[_(U(M),{class:"danmaku",ref_key:"danmaku",ref:d,danmus:p,"onUpdate:danmus":a[1]||(a[1]=B=>p=B),isSuspend:!0,top:20,useSlot:"",loop:"",speeds:f.value,channels:12},{dm:$(({danmu:B})=>[o("div",re,[o("div",me,[a[4]||(a[4]=o("img",{src:se,alt:""},null,-1)),o("span",{style:ee({color:C()}),innerHTML:B},null,12,ce)])])]),_:1},8,["danmus","speeds"])]),U(n)?(T(),L("div",ve,a[5]||(a[5]=[o("img",{src:le,alt:""},null,-1),o("span",null,"发布成功",-1)]))):te("",!0)],64))}}),fe=ae(pe,[["__scopeId","data-v-c1a3f429"]]);export{fe as default};
